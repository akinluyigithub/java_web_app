<?xml version="1.0" encoding="UTF-8"?>
<!-- 
 WebTemplate 1.0
 Luca Vercelli 2017
 Released under GPLv3 
 -->
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts  
Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd">

<struts>

	<constant name="struts.custom.i18n.resources" value="global" />
	<constant name="struts.ui.theme" value="simple" /> <!-- i.e. no theme -->
	
	<!-- AFAIK, this is the only way to change the default interceptors stack-->
	<constant name="struts.convention.default.parent.package" value="default"/>
	<package name="default" namespace="/"
		extends="convention-default">

		<interceptors>
		
			<interceptor name="LoginInterceptor"
				class="com.example.myapp.login.interceptors.LoginInterceptor" />
				
			<interceptor name="AuthInterceptor"
				class="com.example.myapp.authorization.interceptors.AuthorizationInterceptor" />
				
			<interceptor name="FirstRunInterceptor"
				class="com.example.myapp.firstrun.interceptors.FirstRunInterceptor" />
				
			<interceptor-stack name="loginStack">
				<interceptor-ref name="FirstRunInterceptor" />
				<interceptor-ref name="LoginInterceptor" />
				<!-- interceptor-ref name="AuthInterceptor" /-->
				<interceptor-ref name="defaultStack" />
			</interceptor-stack>
		</interceptors>

		<default-interceptor-ref name="loginStack"></default-interceptor-ref>

 		<global-results>
			<result name="first-run" type="redirectAction">first-run</result>
			<result name="login" type="redirectAction">login</result>
			<result name="error">/WEB-INF/jsp/error.jsp</result>
		</global-results>

<!-- Conventions plugin:
"login" chains to action Login
"/home-page" maps to actions.HomePage and results to /home-page.jsp 

-->
		<!-- Pages -->
<!-- 
		<action name="FirstRun" class="com.example.myapp.firstrun.actions.FirstRun">
			<result name="success">/WEB-INF/jsp/firstrun/firstrun.jsp</result>
		</action>

		<action name="Login" class="com.example.myapp.login.actions.Login">
			<result name="login">/WEB-INF/jsp/login/login.jsp</result>
			<result name="success">/index.jsp</result> // browser-redirect to Home
		</action>
 
		<action name="Home" class="com.example.myapp.main.actions.HomePage">
			<result name="success">/WEB-INF/jsp/pages/homePage.jsp</result>
		</action>
-->
		<!-- JSON / REST Services -->

	</package>

</struts>